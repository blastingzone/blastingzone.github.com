<!DOCTYPE HTML>
<meta charset="utf-8">
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- jQuery -->
    <script src="./lib/jquery-1.11.3.min.js"></script>
    <!-- w3.css -->
    <link rel="stylesheet" href="./lib/w3.css">
    <link rel="stylesheet" id="theme_css" href="./lib/w3-theme-dark-grey.css">

    <!-- Google Material Icons -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">

    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.min.css">

    <!-- Custom css -->
    <link rel="stylesheet" href="./css/DynamicBuild.css" />


    <script type="text/javascript" language="javascript" src="./data/pages.json"></script>

    <title>Jump Site MK II</title>
</head>
<body>
    <header class="w3-container w3-theme-d2">
        <h1>:: Dynamic Jump Site ::</h1>
    </header>
    <div id="contents" class="w3-theme-l3 js-container--main">

    </div>
    <!-- Footer -->
    <div class="w3-container w3-theme-d4">
        <header>
            <h4>Jump Site :: My Favorite Web Pages</h4>
            <span>2016. 09. 02. updated</span>
        </header>
        <!-- color changer -->
        <div class="w3-container">
            <div class="w3-row">
                <div class="w3-col m1 w3-center w3-grey theme-change-btn" data-href="./lib/w3-theme-dark-grey.css">-</div>
                <div class="w3-col m1 w3-center w3-blue-grey theme-change-btn" data-href="./lib/w3-theme-blue-grey.css">-</div>
                <div class="w3-col m1 w3-center w3-light-blue theme-change-btn" data-href="./lib/w3-theme-light-blue.css">-</div>
                <div class="w3-col m1 w3-center w3-blue theme-change-btn" data-href="./lib/w3-theme-blue.css">-</div>
                <div class="w3-col m1 w3-center w3-indigo theme-change-btn" data-href="./lib/w3-theme-indigo.css">-</div>
                <div class="w3-col m1 w3-center w3-teal theme-change-btn" data-href="./lib/w3-theme-teal.css">-</div>
                <div class="w3-col m1 w3-center w3-green theme-change-btn" data-href="./lib/w3-theme-green.css">-</div>
                <div class="w3-col m1 w3-center w3-yellow theme-change-btn" data-href="./lib/w3-theme-yellow.css">-</div>
                <div class="w3-col m1 w3-center w3-amber theme-change-btn" data-href="./lib/w3-theme-amber.css">-</div>
                <div class="w3-col m1 w3-center w3-deep-orange theme-change-btn" data-href="./lib/w3-theme-deep-orange.css">-</div>
                <div class="w3-col m1 w3-center w3-red theme-change-btn" data-href="./lib/w3-theme-red.css">-</div>
                <div class="w3-col m1 w3-center w3-brown theme-change-btn" data-href="./lib/w3-theme-brown.css">-</div>
            </div>
        </div>
    </div>
    <script>
        $(document).ready(function () {
            createList(jsonData);
        });

        function createList(jsonData) {
            "use strict";
            var html = "";
            var count = 0;
            for (let idx in jsonData.pages) {
                // get page info
                var elem = jsonData.pages[idx];
                // get page rank
                var rank = elem['rank'];
                // get page tag
                var tag = elem['tag'];
                var tag_html = "";
                // set tag icons
                for (let tag_idx in tag) {
                    tag_html += "<span class='w3-btn " + jsonData.tags[ tag[tag_idx] ] + " '>";
                    tag_html += tag[tag_idx] + "</span>";
                }

                if (count % 3 == 0) {
                    html += "<div class='w3-row'>";
                }
                html += "<div class='w3-container js-card-box'>";
                html += "<div class='w3-card-2 w3-theme-l4'>";
                html += "<header class='w3-container w3-theme-d1'><a href='" + elem.url + "' target='_blank;'><h2>";
                html += elem.title
                html += "</h2></a></header>";
                html += tag_html;
                if (elem.desc) {
                    html += "<div class='w3-container'>";
                    html += elem.desc;
                    html += "</div>";
                }
                html += "</div>";
                html += "</div>";
                if (count % 3 == 2) {
                    html += "</div>";
                }
                ++count;
            }
            $('#contents').empty();
            $('#contents').append(html);
        }
    </script>
</body>
</html>
